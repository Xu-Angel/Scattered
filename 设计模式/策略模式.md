# 策略模式的定义是：定义一系列的算法，把它们一个个封装起来，并且使它们可以相互替换。

在现实中，如果我们想去某个地方旅游，可以根据实际情况有多种路线

如果没有时间但是不在乎钱，可以选择飞机
如果没有钱，可以选择大巴活着火车
如果再穷一点，可以选择骑自行车


使用策略模式计算奖金
现在以年终奖的计算为例
公司年终奖根据员工的工资基数和年底绩效来发放

绩效S,四倍年终奖
绩效A,三倍年终奖
绩效B,二倍年终奖

最初的实现
var calculateBonus = function(performanceLevel, salary) {
	if (performanceLevel === 'S') {
		return salary*4
	}
	if (performanceLevel === 'A') {
		return salary*3
	}
	if (performanceLevel === 'B') {
		return salary*2
	}
}
calculateBonus('B', 2000) // 4000
calculateBonus('S', 2000) // 8000
复制代码这段代码简单，但是存在显而易见的缺点

函数比较庞大，包含很多if-else语句，这些语句需要覆盖所有的逻辑分支
缺乏弹性,如果想新增绩效C，就得深入函数内部实现，违反开放-封闭原则
算法的复用性差

策略模式的实现
var strategies = {
	"S": function(salary) {
		return salary * 4
	},
	"A": function(salary) {
		return salary * 3
	},
	"B": function(salary) {
		return salary * 2
	}				
}
var calculateBonus = function(level, salary) {
	return strategies[level](salary)
}
console.log(calculateBonus('S', 2000)) // 8000
console.log(calculateBonus('B', 2000)) // 4000
复制代码通过使用策略模式重构代码，消除来原程序中分支语句。所有计算奖金有关的逻辑分布在策略对象中，每个策略对象的算法已被各自封装在对象内部，当我们对这些策略对象发出“计算奖金”的请求时，它们会返回各自的计算结果，这不仅是多态性的体现，也是“自由交换”的目的。
策略模式的优缺点
优点

策略模式利用组合，委托和多态等技术思想，可以有效避免多重条件选择语句。
策略模式提供了对开放-封闭原则的完美支持。将算法封装在独立的strategy中，使得它们易于切换，易于理解，易于扩展。
策略模式中的算法也可以复用在系统中的其他地方。
在策略模式中利用组合和委托让Content拥有执行算法的能力，这也是继承的一种更轻便的替代方案。

缺点

使用策略对象会增加很多策略类或者策略对象，但实际上比把这些逻辑放在Content更好。
策略模式会向用户暴露所有实现细节，这其实是违反最少知识原则。

作者：YiHzo
链接：https://juejin.im/post/5be69894e51d4549fb347b27
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。